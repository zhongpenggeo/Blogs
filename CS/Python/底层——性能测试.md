## 性能测试工具

### cProfile

```python
import cProfile
import numpy
from time import sleep

def bad_call(dude):
    sleep(.5)
    
def worse_call(dude):
    sleep(1)
    
def sumulate(foo):
    if not isinstance(foo, int):
        return
    
    a = numpy.random.random((1000, 1000))
    a @ a
    
    ans = 0
    for i in range(foo):
        ans += i
        
    bad_call(ans)
    worse_call(ans)
        
    return ans

cProfile.run('sumulate(150)')
```



### timeit

```python
%timeit sumulate(150)
%%timeit
sumulate(150)
```

timeit比较常用，在jupyter下调用很简单很直观，其它的工具还有很多比如line_profiler等，不过个人最喜欢的可视化性能调试工具还是snakeviz 。

```python
%load_ext snakeviz 
%snakeviz  sumulate(150)
```

