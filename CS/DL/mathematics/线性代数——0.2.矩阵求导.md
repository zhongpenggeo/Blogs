### 符号表示

- 标量$a,b,c,d,e$为常量，标量$u,v$为$x,\boldsymbol{x,X}$的函数
- 向量$\boldsymbol{a,b,c,d,e,}$为常向量，向量$\boldsymbol{u,v}$为$x,\boldsymbol{x,X}$的函数
- 矩阵$\boldsymbol{A,B,C,D,E}$为常矩阵，矩阵$\boldsymbol{U,V}$为$x,\boldsymbol{x,X}$的函数

### 向量求导

#### 向量对标量求导

向量$\boldsymbol{y}=[y_1,y_2,\cdots,y_m]^{\mathrm{T}}$对标量$x$的导数：
$$
\frac{\partial{\boldsymbol{y}}}{\partial{x}} = [\frac{\partial{y_1}}{\partial{x}},\frac{\partial{y_2}}{\partial{x}},\cdots,\frac{\partial{y_m}}{\partial{x}}]^{\mathrm{T}}
$$

#### 标量对向量求导

标量$y$对向量$\boldsymbol{x}^{\textrm{T}}=[x_1,x_2,\cdots,x_n]$的导数：
$$
\frac{\partial{y}}{\partial{\boldsymbol{x}^\textrm{T}}} = [\frac{\partial{y}}{\partial{x_1}},\frac{\partial{y}}{\partial{x_2}},\cdots,\frac{\partial{y}}{\partial{x_n}}]^{\textrm{T}}
$$

#### 向量对向量求导

向量$\boldsymbol{y}=[y_1,y_2,\cdots,y_m]^{\mathrm{T}}$对向量$\boldsymbol{x}=[x_1,x_2,\cdots,x_n]^{\mathrm{T}}$的导数：
$$
% <![CDATA[
\frac{\partial{\boldsymbol{y}}}{\partial{\boldsymbol{x}}} = 

\left[
\begin{matrix}
 \frac{\partial{y_1}}{\partial{x_1}} & \frac{\partial{y_1}}{\partial{x_2}}      & \cdots & \frac{\partial{y_1}}{\partial{x_n}}      \\
 \frac{\partial{y_2}}{\partial{x_1}}     &\frac{\partial{y_2}}{\partial{x_2}}    & \cdots & \frac{\partial{y_2}}{\partial{x_n}}      \\
 \vdots & \vdots & \ddots & \vdots \\
 \frac{\partial{y_m}}{\partial{x_1}}     &\frac{\partial{y_m}}{\partial{x_2}}      & \cdots &\frac{\partial{y_m}}{\partial{x_n}}      \\
\end{matrix}
\right] %]]>
$$
为$m*n$维矩阵，也叫做雅可比矩阵，即：$(\frac{\partial{\boldsymbol{y}}}{\partial{\boldsymbol{x}}})_{ij} = \frac{\partial{y_i}}{\partial{x_j}}$

### 矩阵求导定义

#### 矩阵对标量求导

$$
% <![CDATA[
\frac{\partial{\boldsymbol{Y}}}{\partial{x}} = 

\left[
\begin{matrix}
 \frac{\partial{y_{11}}}{\partial{x}} & \frac{\partial{y_{12}}}{\partial{x}}      & \cdots & \frac{\partial{y_{1n}}}{\partial{x}}      \\
 \frac{\partial{y_{21}}}{\partial{x}}     &\frac{\partial{y_{22}}}{\partial{x}}    & \cdots & \frac{\partial{y_{2n}}}{\partial{x}}      \\
 \vdots & \vdots & \ddots & \vdots \\
 \frac{\partial{y_{m1}}}{\partial{x}}     &\frac{\partial{y_{m2}}}{\partial{x}}      & \cdots &\frac{\partial{y_{mn}}}{\partial{x}}      \\
\end{matrix}
\right] %]]>
$$

#### 标量对矩阵求导

$$
% <![CDATA[
\frac{\partial{y}}{\partial{\boldsymbol{X}}} = 

\left[
\begin{matrix}
 \frac{\partial{y}}{\partial{x_{11}}} & \frac{\partial{y}}{\partial{x_{21}}}      & \cdots & \frac{\partial{y}}{\partial{x_{p1}}}      \\
 \frac{\partial{y}}{\partial{x_{12}}}     &\frac{\partial{y}}{\partial{x_{22}}}    & \cdots & \frac{\partial{y}}{\partial{x_{p2}}}      \\
 \vdots & \vdots & \ddots & \vdots \\
 \frac{\partial{y}}{\partial{x_{1q}}}     &\frac{\partial{y}}{\partial{x_{2q}}}      & \cdots &\frac{\partial{y}}{\partial{x_{pq}}}      \\
\end{matrix}
\right] %]]>
$$

#### 求导法则

- 若$y = f(g(x))$，则$y^\prime(x) = f^\prime(g(x))g^\prime(x)$

- $(fg)^\prime = f^\prime g+fg^\prime$

- $(f+g)^\prime = f^\prime + g^\prime$

求和法则是通用的，由于矩阵乘积不是可交换的，所以乘积法则需要注意顺序。链式法则在矩阵对标量和标量对矩阵求导时不适用（这个情况下，一般使用[迹运算](./线性代数——迹运算.md)）

#### 恒等式

$$
||\boldsymbol{X}||^2 = \mathrm{tr}(\boldsymbol{X}^\mathrm{T}\cdot\boldsymbol{X}) = \mathrm{tr}(\boldsymbol{X}\cdot\boldsymbol{X}^\mathrm{T})
$$

$$
\mathrm{tr(\boldsymbol{A}\boldsymbol{B}\boldsymbol{C}\boldsymbol{D})}
 = \mathrm{tr(\boldsymbol{B}\boldsymbol{C}\boldsymbol{D}\boldsymbol{A})}
 = \mathrm{tr(\boldsymbol{C}\boldsymbol{D}\boldsymbol{A}\boldsymbol{B})}
 = \mathrm{tr(\boldsymbol{D}\boldsymbol{A}\boldsymbol{B}\boldsymbol{C})}
$$

$$
\frac{\partial{y^\mathrm{T}}}{\partial{x}} = \frac{\partial{y}}{\partial{x^\mathrm{T}}} = (\frac{\partial{y}}{\partial{x}})^{\mathrm{T}}
$$



参考：

[矩阵求导 (fei-wang.github.io)](https://fei-wang.github.io/matrix.html)