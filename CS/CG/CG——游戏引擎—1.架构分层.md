五层架构

### 工具层

最高层GUI

比如：各类编辑器、生产力工具

开发工具：QT、C#、h5；

digital content creation：生成assert

通用数据格式

### 功能层

完成各种功能，渲染，动画之类

Ticks：把输入到输出跑一遍

- logic：创建模型/世界；
- render：把世界投影到2D屏幕；

多核：

- 比如把物理计算做成并行化
- 流程并行化
- job system



### 资源层

各种数据文件，如图像建模等。

转换为引擎搞笑数据，转为assert。比如jpg等图片转为ast（适于GUI处理）

关系文件composite assert；

GUID：唯一识别号

handle system：资源管理器

### 核心层

各种算法，内存管理，容器分配等。

比如快速计算开根号

数组的加减法：运用cpu提供的矢量化操作；

自己管理内存：从系统申请一大块内存，然后自己管理

数据结构：STL的内存效率往往不高，比如vector如果频繁增加删除回出现内存碎片化。

### 平台层

输入设备

核心问题在于不同操作系统使用的图形库不同，windows的direct，opengl等等；此时会考虑使用C++的虚函数。

### 分层的原因

- decoupling：降低复杂度，分解到每一层中
- 管理
- 往下稳定，往上灵活；

#### STL效率低

内存管理的问题；

C++17引入EA STL；

VR：受限于硬件算力、强交互（少细节）、